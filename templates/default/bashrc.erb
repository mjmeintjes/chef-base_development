## LoKe's ~/.bashrc
[ -z "$PS1" ] && return

# Basic options
export HISTCONTROL=ignoredups
export COLORFGBG='default;default'

shopt -s checkwinsize
eval "$(dircolors -b /etc/dircolors)"


# Bash completion
if [ -f /etc/bash_completion ]; then
    . /etc/bash_completion
fi

# Locale and editor
export EDITOR=vi

save_function() {
    local ORIG_FUNC=$(declare -f $1)
    local NEWNAME_FUNC="$2${ORIG_FUNC#$1}"
    eval "$NEWNAME_FUNC"
}


prompt_command() {
    run_on_prompt_command

    # X Terminal titles
    case "$TERM" in
    xterm*|rxvt*|cygwin)
        echo -ne "\033]0;${USER}@${HOSTNAME}: ${PWD}\007"
        ;;
    *)
        ;;
    esac
}

PROMPT_COMMAND="prompt_command"
export HISTTIMEFORMAT='%F %T '

mkdir -p ~/.bashrc.d
touch ~/.bashrc.d/00-default
for f in ~/.bashrc.d/*; do
   source $f
done
